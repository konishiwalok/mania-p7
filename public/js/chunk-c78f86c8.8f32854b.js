(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c78f86c8"],{"2b0a":function(e,t,s){},9126:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"min-vh-100 d-flex flex-column justify-content-between bg-primary"},[s("NavbarPost"),s("MyProfile"),s("Footer")],1)},a=[],r=s("77a4"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container-fluid  "},[s("div",{staticClass:"card col-8 mx-auto elborde jumbotron  "},[s("h1",{staticClass:"h3 auto-margin "},[e._v("mon profil üéâ")]),s("hr",{staticClass:"line w-100"}),s("div",{staticClass:"row  "},[s("div",{staticClass:"col-8 mx-auto my-4 "},[s("div",{staticClass:"d-flex justify-content-center align-items-center "},[s("b-img",{attrs:{id:"imgProfile",src:e.user.imageUrl,fluid:""}}),s("div",[s("p",{staticClass:" auto-margin "},[e._v("username: ")]),s("h1",{staticClass:"ml-2 h3 align-self-end"},[e._v(e._s(e.user.pseudo))])])],1),s("hr",{staticClass:"line w-75"})])]),s("div",{staticClass:"form-group mt-4  "},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-10 mx-auto mb-3"},[s("b-link",{directives:[{name:"b-toggle",rawName:"v-b-toggle.newPassword",modifiers:{newPassword:!0}}],staticClass:"btn bg-info font-weight-bold px-2 mr-2"},[e._v("Modifier mes infos")]),s("b-collapse",{attrs:{id:"newPassword"}},[s("form",{staticClass:"card col col-lg-8 mx-auto bg-white py-4",attrs:{enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.updateProfile.apply(null,arguments)}}},[s("div",{staticClass:"form-group mt-3"},[s("label",{staticClass:"font-weight-bold",attrs:{id:"imageLabel",for:"image"}},[e._v("Modifier mon image")]),s("input",{ref:"image",attrs:{type:"file",name:"image",id:"image"},on:{change:function(t){return e.handleFileUpload()}}}),s("span",{staticClass:"text-center font-weight-bold"},[e._v(e._s(e.image.name))]),s("div",{staticClass:"form-group form-group-sm",class:{"form-group--error":e.$v.pseudo.$error}},[s("div",{staticClass:"col mx-auto position-relative"},[s("label",{attrs:{for:"pseudo"}}),s("div",{staticClass:"d-flex justify-content-center input-group"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.$v.pseudo.$model,expression:"$v.pseudo.$model",modifiers:{trim:!0}}],staticClass:"col-7 col-lg-6 form-control form-control-sm",attrs:{id:"pseudo",name:"pseudo",type:"text",placeholder:e.user.pseudo},domProps:{value:e.$v.pseudo.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.pseudo,"$model",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),e.$v.pseudo.minLength?e._e():s("span",{staticClass:"badge badge-danger"},[e._v(e._s(e.$v.pseudo.$params.minLength.min)+" caract√®res min !")])])]),s("div",{staticClass:"form-group form-group-sm",class:{"form-group--error":e.$v.email.$error}},[s("div",{staticClass:"col mx-auto position-relative"},[s("label",{attrs:{for:"email"}}),s("div",{staticClass:"d-flex justify-content-center input-group"},[s("span",{staticClass:"icon position-absolute input-group-addon"},[s("svg",{staticClass:"bi bi-envelope-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"30",fill:"currentColor",viewBox:"0 0 16 16"}},[s("path",{attrs:{d:"M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555zM0 4.697v7.104l5.803-3.558L0 4.697zM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757zm3.436-.586L16 11.801V4.697l-5.803 3.546z"}})])]),s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.$v.email.$model,expression:"$v.email.$model",modifiers:{trim:!0}}],staticClass:"col-7 col-lg-6 form-control form-control-sm",attrs:{id:"email",name:"email",type:"email",placeholder:e.user.email},domProps:{value:e.$v.email.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.email,"$model",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])])]),s("div",{staticClass:"form-group form-group-sm",class:{"form-group--error":e.$v.password.$error}},[s("div",{staticClass:"col mx-auto position-relative"},[s("label",{attrs:{for:"password"}}),s("div",{staticClass:"d-flex justify-content-center input-group"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.$v.password.$model,expression:"$v.password.$model",modifiers:{trim:!0}}],staticClass:"col-7 col-lg-6 form-control form-control-sm",attrs:{id:"password",name:"password",type:"password",placeholder:"Mot de passe"},domProps:{value:e.$v.password.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.password,"$model",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),e.$v.password.minLength?e._e():s("span",{staticClass:"badge badge-danger"},[e._v(e._s(e.$v.password.$params.minLength.min)+" caract√®res min !.")])])]),s("div",{staticClass:"form-group form-group-sm"},[s("div",{staticClass:"col mx-auto position-relative"},[s("label",{attrs:{for:"confirmPassword"}}),s("div",{staticClass:"d-flex justify-content-center input-group"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.$v.confirmPassword.$model,expression:"$v.confirmPassword.$model",modifiers:{trim:!0}}],staticClass:"col-7 col-lg-6 form-control form-control-sm",attrs:{id:"confirmPassword",name:"confirmPassword",type:"password",placeholder:"Confirmation"},domProps:{value:e.$v.confirmPassword.$model},on:{input:function(t){t.target.composing||e.$set(e.$v.confirmPassword,"$model",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])])]),s("button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.newPassword",modifiers:{newPassword:!0}}],staticClass:"btn btn-dark btn-sm mt-3",attrs:{type:"submit"}},[e._v(" Valider ")])])])]),s("hr",{staticClass:"line w-75"}),s("b-link",{staticClass:"btn bg-info font-weight-bold px-2 ",attrs:{to:"allpost"}},[e._v("R√©diger un post")])],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-8 mx-auto my-5"},[1==this.user.isAdmin?s("b-link",{staticClass:"delete badge badge-light font-weight-bold py-1 mr-2",attrs:{to:"AllProfiles"}},[e._v("Consulter les profiles")]):e._e(),s("b-buton",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-center",modifiers:{"modal-center":!0}}],staticClass:"delete badge badge-light py-1  bg-danger"},[e._v("Supprimer mon compte üóëÔ∏è")]),s("b-modal",{attrs:{id:"modal-center",centered:"","content-class":"shadow",title:"confirmation modal","header-bg-variant":"danger"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var o=t.cancel;return[s("b-button",{attrs:{size:"sm"},on:{click:function(e){return o()}}},[e._v(" Cancel ")]),s("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:function(t){return t.preventDefault(),e.deleteUser.apply(null,arguments)}}},[e._v("Confirmer")])]}}])},[s("p",{staticClass:"my-2"},[e._v(" √ätes-vous s√ªr de vouloir "),s("strong",[e._v("supprimer")]),e._v(" votre compte ? ")])])],1)])]),e.errorInputs?s("b-alert",{attrs:{show:"",dismissible:"",variant:"danger"}},[e._v("Pseudo ou Email d√©j√† utilis√©")]):e._e(),e.confirmUpdate?s("b-alert",{attrs:{show:"",dismissible:"",variant:"success"}},[e._v("Profil mis √† jour")]):e._e(),e.errorDelete?s("b-alert",{attrs:{show:"",dismissible:"",variant:"danger"}},[e._v("Une erreur est survenue.Ressayez plus tard")]):e._e(),e.differentConfirmPassword?s("b-alert",{attrs:{show:"",dismissible:"",variant:"danger"}},[e._v("Les mots de passe sont diff√©rents")]):e._e()],1)])},n=[],l=s("1da1"),d=(s("d3b7"),s("3ca3"),s("ddb0"),s("2b3d"),s("96cf"),s("b5ae")),m=s("bc3a"),c=s.n(m),u={name:"profile",created:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c.a.get("http://localhost:3000/api/users/profile",{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+e.token}}).then((function(t){e.user=t.data,console.log(t)})).catch((function(t){console.log(t+"User inconnu"),e.$router.push("/login")}));case 2:case"end":return t.stop()}}),t)})))()},data:function(){return{user:[],token:localStorage.getItem("token"),userId:parseInt(localStorage.getItem("userId")),pseudo:"",email:"",password:"",confirmPassword:"",image:"",isAdmin:"",submited:!1,isActive:!1,errorInputs:!1,confirmUpdate:!1,errorDelete:!1,differentConfirmPassword:!1}},validations:{pseudo:{minLength:Object(d["minLength"])(5)},email:{email:d["email"]},password:{minLength:Object(d["minLength"])(6)},confirmPassword:{}},methods:{handleFileUpload:function(){this.image=this.$refs.image.files[0],this.user.imageUrl=URL.createObjectURL(this.image)},updateProfile:function(){var e=this;if(this.$v.$touch(),this.errorInputs=!1,this.errorDelete=!1,this.differentConfirmPassword=!1,null!==this.password)if(this.password!==this.confirmPassword)this.differentConfirmPassword=!0;else{var t=new FormData;this.image?(t.append("image",this.image),t.append("userId",this.userId),t.append("pseudo",this.pseudo),t.append("email",this.email),t.append("password",this.password)):(t.append("userId",this.userId),t.append("pseudo",this.pseudo),t.append("email",this.email),t.append("password",this.password)),c.a.put("http://localhost:3000/api/users/".concat(this.userId),t,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.token}}).then((function(){localStorage.setItem("pseudo",e.pseudo),e.confirmUpdate=!0,e.$router.go()})).catch((function(){e.errorInputs=!0}))}else{var s=new FormData;this.image?(s.append("image",this.image),s.append("userId",this.userId),s.append("pseudo",this.pseudo),s.append("email",this.email)):(s.append("userId",this.userId),s.append("pseudo",this.pseudo),s.append("email",this.email)),c.a.put("http://localhost:3000/api/users/".concat(this.userId),s,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+this.token}}).then((function(){localStorage.setItem("pseudo",e.pseudo),e.confirmUpdate=!0,e.$router.go()})).catch((function(){e.errorInputs=!0,e.$router.go()}))}},deleteUser:function(){var e=this;c.a.delete("http://localhost:3000/api/users/".concat(this.userId),{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+this.token}}).then((function(t){console.log(t),alert("Votre compte √† bien √©t√© supprim√© !"),localStorage.removeItem("token"),localStorage.removeItem("userId"),localStorage.removeItem("pseudo"),e.$router.push("/signup")})).catch((function(e){return console.log("cannot delete user "+e)}))}}},p=u,f=(s("e058"),s("2877")),v=Object(f["a"])(p,i,n,!1,null,null,null),g=v.exports,h=s("fd2d"),w={name:"Profile",components:{NavbarPost:r["a"],MyProfile:g,Footer:h["a"]}},b=w,$=Object(f["a"])(b,o,a,!1,null,null,null);t["default"]=$.exports},e058:function(e,t,s){"use strict";s("2b0a")}}]);
//# sourceMappingURL=chunk-c78f86c8.8f32854b.js.map